
# Week 1 – August 2025 Learning Log

## Day 1 – AWS CLI Setup
- Installed AWS CLI v2 on Ubuntu.
- Configured with `aws configure`.
- Verified with `aws s3 ls`.
- Linked project: [AWS CLI Setup](../projects/aws-cli-setup.md)

## Day 2 – GitHub SSH Access
- Generated SSH key, added to GitHub.
- Verified with `ssh -T git@github.com`.
- Linked project: [GitHub SSH](../projects/github-ssh.md)

## Day 3 – User Management
- Created users with `adduser` and `usermod`.
- Added groups for developers and finance.
- Linked project: [User Management](../projects/user-management.md)
- Script: [user-provision.sh](../scripts/user-provision.sh)

## Day 4 – Nginx Web Server
- Installed Nginx with `apt install nginx`.
- Served “Hello World” from `/var/www/html`.
- Linked project: [Nginx Server](../projects/nginx-server.md)
- Runbook: [Restart Nginx](../runbooks/restart-nginx.md)

## Day 5 – Backup Script
- Wrote a bash script to back up `/etc`.
- Compressed into `/backups/etc-<date>.tar.gz`.
- Script: [backup-etc.sh](../scripts/backup-etc.sh)

## Day 6 – Cronjob for Backup
- Automated backup script with cronjob (daily @ 2am).
- Verified cron logs.

## Day 7 – Runbook Documentation
- Created runbook for restoring backups.
- Linked runbook: [Restore Backup](../runbooks/restore-backup.md)

  ## Day 27–28: SSH Security Audit
- Ran grep commands on /var/log/auth.log to detect failed SSH attempts.
- Observed multiple "invalid user" probes (`jesus, postgres, samba, server, sales`) from different IP addresses.
- Confirmed **no successful login** for those accounts (`[preauth]` stage = blocked before auth).
- Learned to use grep with:
  - `-c` to count
  - `-E` for OR patterns
  - awk + sort + uniq for IP ranking
- Wrote small script (`ssh-brute-report`) to generate daily summary.
- Lesson learned: brute-force attempts are common; must enforce key-only SSH and Fail2ban.

  ## Day 27: Gather evidence from /var/log/auth.log
#### What I did
- Searched for invalid SSH logins and pre-authentication disconnects.
- Verified whether any of these attempts succeeded.

#### Commands
```bash
sudo grep -n "invalid user" /var/log/auth.log
sudo grep -n "Failed password" /var/log/auth.log
sudo grep -nE "Accepted (password|publickey)" /var/log/auth.log
```
- Quick conclusions
- All entries are invalid user … [preauth] → no successful logins from these attempts.
- Common usernames probed: jesus, server, webmaster, terrariaserver, postgres, shell.
- Multiple source IPs, with repeats from 209.14.2.218 and 182.92.165.191.

What I learned

- [preauth] means the connection ended before authentication (safe).

- Use Accepted password / Accepted publickey to confirm real successes.

  ## Proceed to Day 28 to quantify top usernames and IPs.
  
### Day 28: Quantify attackers (usernames & IPs)
```markdown
#### Goal
Rank the most common invalid usernames and source IPs.

#### Commands
```bash
# Top invalid usernames
sudo grep "invalid user" /var/log/auth.log \
| awk '{for(i=1;i<=NF;i++) if ($i=="user") print $(i+1)}' \
| sort | uniq -c | sort -nr | head

# Top source IPs
sudo grep "invalid user" /var/log/auth.log \
| awk 'match($0,/([0-9]{1,3}\.){3}[0-9]{1,3}/){print substr($0,RSTART,RLENGTH)}' \
| sort | uniq -c | sort -nr | head
```
Findings (from today’s sample)

Usernames seen: jesus, server, webmaster, terrariaserver, postgres, shell, samba, sales

IPs seen: 112.163.28.230, 209.14.2.218, 182.92.165.191, 124.77.164.80, 154.12.182.16, 49.124.152.208, 1.25.18.18, 65.20.191.12, 78.189.21.157

Verification of successful logins
```bash
sudo grep -nE "Accepted (password|publickey)" /var/log/auth.log || echo "No accepted logins found in window"
```
